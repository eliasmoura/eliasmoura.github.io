<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="AsciiDoc 10.1.4">
<meta name="description" content="Elias Moura's blog.">
<meta name="keywords" content="archive, blog, eliasmoura">
<meta name="viewport" content="width=device-width, initial-scale=1 maximum=scale=1">
<title>Elias Moura's blog - </title>
<link rel="stylesheet" href="static/css/blog.css" type="text/css">
<link rel="stylesheet" href="static/css/pygments.css" type="text/css">

<script type="text/javascript" src="static/javascript/asciidoc.js"></script>
<script type="text/javascript">
asciidoc.install();
</script>
</head>
<body>
<div id="banner"></div>
<nav id="navbar">
<span id="home"><a href="/index.html">Elias Moura</a></span>
<span id="categories"><a href="categories.html">Categories</a></span>
<span id="archive"><a href="archive.html">Archive</a></span>
<span id="about"><a href="about.html">About</a></span>
</nav>
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="_a_href_cycling_in_portugal_html_cycling_in_portugal_a"><a href="cycling_in_portugal.html">Cycling in Portugal</a></h2>
<div class="sectionbody">
<div class="paragraph"><p>2018-04-18</p></div>
<div class="paragraph"><p>I have always ridden a bicycle since I was something like 5 years old.
But it has being, for most of the time, for commuting.
I started riding on a bicycle that was too big for me and without the supporting wheels.
A neighbor was who taught me how to ride.
I still remember the time, when I was still learning, I was riding in a curvy street, the bicycle didn`t have brakes and I didn`t know how to turn —yes, it was in the early stages of my learning process.
I was going straight to the weed and the unique way I thought of saving myself from leaving the street and end up in the midle of the weed was to jump.
I jumpped and "landed" on a soft ground —it was a dirt stread.</p></div>
<div class="paragraph"><p>I had many bicyle in Brazil.
Most of them were stolen or, in one ocation, smashed by a truck.
Thankfully I got a twisted ankle as my major injury and a few scratches, although that ankle never healed properly.
If I stay with my left foot resting in a specific position for a long period of time it will start to hurt.</p></div>
<div class="paragraph"><p>The smashed bicycle was stolen too, by the way.</p></div>
<div class="paragraph"><p>I had many accidents while riding in Brazi.
I smashed my shoulder in car`s doors twice.
In both ocations I wasn`t going fast, but I was fast enough to fell a lot of pain on my shoulder.
Here in Portugal I have a collection of accidents too.
All being complitely my fault.
The first one was braking while turning in a slipery cobblestone street.
The second was trying to do some wheelie… Yeah, it didn`t go well.
The last one was cornering fast without knowing how to do that either.</p></div>
<div class="paragraph"><p>Desconcidering those issues, the fact that my bicycle is terrible and headache prone, riding in Portugal have being a lot of fun.
There are a lot of great view and good roads.
You don`t have to be afraid of riding in dark places late at night.
After moving to here I started, for the first time, to care about the state of my bicycle and this one is terrible.
I changed the inner tube of the back wheel three times because of punctures; that also was my first time doing such thing.
I pretend to stay with this bicycle for a couple more monthes for practise with maintenace and then buy a new one.</p></div>
<div class="paragraph"><p>Portugal showed a really nice weather for me so far; Cold enough to not make me sweat all the time, but warm enough to allow me to go outside without havy clothes.
I am really surprised with the fact that the drivers will almost always stop to allow the pedestrians cross the street in the pedestrian crossing.
The structure is incredible, at least if comparing with what we have in Brazil.</p></div>
<div class="paragraph"><p>Going back to the views, I took a few pictures with my smartphone, that also gives me a lot of headache.
Here are the photos I took with that said phone:</p></div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180404_09_40_56_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180404_09_40_56_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180404_09_44_55_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180404_09_44_55_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180404_09_48_38_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180404_09_48_38_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180404_10_01_57_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180404_10_01_57_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180404_10_03_07_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180404_10_03_07_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180404_10_04_10_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180404_10_04_10_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180404_10_06_26_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180404_10_06_26_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180404_10_06_30_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180404_10_06_30_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180404_10_08_05_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180404_10_08_05_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180404_10_09_32_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180404_10_09_32_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180404_18_47_43_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180404_18_47_43_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180404_18_48_05_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180404_18_48_05_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180411_15_56_29_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180411_15_56_29_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180411_15_56_38_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180411_15_56_38_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180411_16_13_30_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180411_16_13_30_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180411_16_30_14_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180411_16_30_14_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180411_16_36_59_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180411_16_36_59_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180411_16_38_10_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180411_16_38_10_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180411_16_38_14_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180411_16_38_14_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180411_16_38_43_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180411_16_38_43_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180411_16_39_07_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180411_16_39_07_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180413_15_45_02_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180413_15_45_02_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180413_15_45_05_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180413_15_45_05_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180413_16_07_05_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180413_16_07_05_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180417_16_09_34_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180417_16_09_34_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180417_16_24_18_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180417_16_24_18_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180417_16_30_13_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180417_16_30_13_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_09_24_57_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_09_24_57_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_09_25_01_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_09_25_01_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_09_35_26_Rich.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_09_35_26_Rich.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_09_47_42_Rich.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_09_47_42_Rich.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_09_48_14_Rich.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_09_48_14_Rich.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_10_22_17_Rich.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_10_22_17_Rich.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_10_57_30_Rich.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_10_57_30_Rich.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_11_01_01_Rich.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_11_01_01_Rich.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_11_14_02_Rich.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_11_14_02_Rich.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_11_14_29_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_11_14_29_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_11_14_35_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_11_14_35_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_11_27_24_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_11_27_24_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_11_44_17_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_11_44_17_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_11_44_36_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_11_44_36_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_11_46_26_Panorama.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_11_46_26_Panorama.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_11_46_39_Panorama.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_11_46_39_Panorama.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_11_48_17_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_11_48_17_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_12_02_24_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_12_02_24_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_12_02_27_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_12_02_27_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_12_02_36_Panorama.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_12_02_36_Panorama.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_12_14_30_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_12_14_30_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_12_17_47_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_12_17_47_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_12_17_50_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_12_17_50_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_12_17_58_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_12_17_58_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_12_21_23_Raw__highres.dng">
<img src="static/img/galery/portugal_views/WP_20180418_12_21_23_Raw__highres.dng" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_12_21_23_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_12_21_23_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_12_21_30_Raw__highres.dng">
<img src="static/img/galery/portugal_views/WP_20180418_12_21_30_Raw__highres.dng" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_12_21_30_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_12_21_30_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_12_21_42_Panorama.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_12_21_42_Panorama.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/WP_20180418_12_56_34_Raw.jpg">
<img src="static/img/galery/portugal_views/WP_20180418_12_56_34_Raw.jpg" alt="View of Portugal">
</a>
</div>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="static/img/galery/portugal_views/wp_ss_20180418_0001.png">
<img src="static/img/galery/portugal_views/wp_ss_20180418_0001.png" alt="View of Portugal">
</a>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_a_href_creating_your_own_blogging_engine_part2_html_creating_your_own_blogging_engine_part_2_a"><a href="creating_your_own_blogging_engine_part2.html">Creating Your Own Blogging Engine - part 2</a></h2>
<div class="sectionbody">
<div class="paragraph"><p>2018-04-04</p></div>
<div class="paragraph"><p>I wanted a method to blog without to bother with keeping the date and, if possible, using just git to create the publish date.
It "works", but it has a major downfall that will be explained later.
The server has a hook to rebuild the blog every time a commit is
pushed to it.
The hook is this piece of <em>sh</em> code.</p></div>
<div class="listingblock">
<div class="title">.git/hooks/post-receive</div>
<div class="content"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>

<span class="nv">TMP_DIR</span><span class="o">=</span>build_blog.XXX
<span class="nv">GIT_DIR</span><span class="o">=</span>/srv/git/noobkotto/blog
<span class="nv">BLOG_DIR</span><span class="o">=</span>/srv/noobkotto/blog/

<span class="nv">TMP_DIR</span><span class="o">=</span><span class="k">$(</span>mktemp -p <span class="s2">&quot;</span><span class="si">${</span><span class="nv">TMPDIR</span><span class="k">:-</span><span class="p">/tmp</span><span class="si">}</span><span class="s2">/&quot;</span> -d <span class="s2">&quot;</span><span class="nv">$TMP_DIR</span><span class="s2">&quot;</span><span class="k">)</span>

git clone <span class="s2">&quot;</span><span class="nv">$GIT_DIR</span><span class="s2">&quot;</span> <span class="s2">&quot;</span><span class="nv">$TMP_DIR</span><span class="s2">&quot;</span>
<span class="nb">cd</span> <span class="s2">&quot;</span><span class="nv">$TMP_DIR</span><span class="s2">&quot;</span>

<span class="nb">printf</span> <span class="s2">&quot;++++++++++++++++++++++++++++++++++\\n%s\\n&quot;</span> <span class="s2">&quot;Building blog.&quot;</span>
make
make install <span class="nv">prefix</span><span class="o">=</span>srv/noobkotto/
<span class="o">[</span> <span class="nv">$?</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">printf</span> <span class="s2">&quot;++++++++++++++++++++++++++++++++++\\n%s\\n&quot;</span> <span class="s1">&#39;Ok.&#39;</span>

<span class="nb">cd</span> -
rm -r <span class="s2">&quot;</span><span class="nv">$TMP_DIR</span><span class="s2">&quot;</span>
</pre></div></div></div>
<div class="paragraph"><p>When you push your new commits to the server, the git push log  will look like the example bellow.</p></div>
<div class="literalblock">
<div class="title">Output of pushing to the server</div>
<div class="content monospaced">
<pre>-&gt; git push origin master
Counting objects: 9, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (8/8), done.
Writing objects: 100% (9/9), 1.59 KiB | 812.00 KiB/s, done.
Total 9 (delta 3), reused 0 (delta 0)
remote: Cloning into '/tmp/build_blog.ZWv'... <b>&lt;1&gt;</b>
remote: done.
remote: ++++++++++++++++++++++++++++++++++
remote: Building blog.
make output
remote: ++++++++++++++++++++++++++++++++++
remote: Ok.
remote: /srv/git/noobkotto/blog
To noobkotto.com:/srv/git/noobkotto/blog
   ea3578a..add8404  master -&gt; master</pre>
</div></div>
<div class="colist arabic"><ol>
<li>
<p>
All the lines with "remote" at the beginning are from the hook shown above.
</p>
</li>
</ol></div>
<div class="paragraph"><p>I do auto-generation of the archive/index pages and the date of publication through git commit.
The way it works at the moment is by using the first commit of a file as the publish date.
This makes things easy in a way, but it also prevent me from properly using git as I can only commit when I am done with the post.
I might be overlooking some details about the use of git, but for now
it may suffice.</p></div>
<div class="paragraph"><p>The other scripts that make use of git are:</p></div>
<div class="listingblock">
<div class="title">tools/build_archive.sh</div>
<div class="content"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh --</span>

<span class="c1"># Print the archive.adoc to stdout using `git log` + &#39;coreutils utilits&#39; to list and order the adoc files by date.</span>

<span class="nb">printf</span> <span class="s2">&quot;= Index\\nbuild_archive.sh\\n:keywords: archive, blog, noobkotto\\n:description: Blog&#39;s post archive.\\n\\n&quot;</span>

<span class="k">for</span> f <span class="k">in</span> src/*.adoc<span class="p">;</span> <span class="k">do</span>
  git log --diff-filter<span class="o">=</span>A --follow --format<span class="o">=</span><span class="s2">&quot;%at </span><span class="nv">$f</span><span class="s2">&quot;</span> -- <span class="s2">&quot;</span><span class="nv">$f</span><span class="s2">&quot;</span> <span class="p">|</span> tail -1<span class="p">;</span>
<span class="k">done</span> <span class="p">|</span> sort <span class="p">|</span> <span class="k">while</span> <span class="nb">read</span> -r date_ doc<span class="p">;</span> <span class="k">do</span>
  <span class="nv">link</span><span class="o">=</span><span class="si">${</span><span class="nv">doc</span><span class="p">#src/</span><span class="si">}</span>
  <span class="nv">title</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>head -n <span class="m">1</span> <span class="s2">&quot;</span><span class="nv">$doc</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2">&quot;</span>
  <span class="nb">printf</span> <span class="s2">&quot;%s link:%s[%s]\\n\\n&quot;</span>  <span class="s2">&quot;</span><span class="k">$(</span><span class="nv">LANG</span><span class="o">=</span>C date <span class="s1">&#39;+%Y-%m-%d&#39;</span> -d @<span class="s2">&quot;</span><span class="nv">$date_</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2">&quot;</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">link</span><span class="p">%adoc</span><span class="si">}</span><span class="s2">html&quot;</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">title</span><span class="p">#= </span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">done</span>
</pre></div></div></div>
<div class="paragraph"><p>As I am using asciidoc to generate the pages, I might as well generate the archive and index pages as .adoc files and then use asciidoc to make the rest.</p></div>
<div class="listingblock">
<div class="title">tools/build_index.sh</div>
<div class="content"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh --</span>

<span class="c1"># Print the archive.adoc to stdout using `git log` + &#39;coreutils utilits&#39; to list and order the adoc files by date.</span>

<span class="nb">printf</span> <span class="s2">&quot;:keywords: archive, blog, noobkotto\\n:description: Kotto&#39;s blog.\\n\\n&quot;</span>

<span class="k">for</span> f <span class="k">in</span> src/*.adoc<span class="p">;</span> <span class="k">do</span>
  git log --diff-filter<span class="o">=</span>A --follow --format<span class="o">=</span><span class="s2">&quot;%at </span><span class="nv">$f</span><span class="s2">&quot;</span> -- <span class="s2">&quot;</span><span class="nv">$f</span><span class="s2">&quot;</span> <span class="p">|</span> tail -1<span class="p">;</span>
<span class="k">done</span> <span class="p">|</span> sort --reverse <span class="p">|</span> head -n <span class="m">3</span> <span class="p">|</span> <span class="k">while</span> <span class="nb">read</span> -r date_ doc<span class="p">;</span> <span class="k">do</span>
  <span class="nv">link</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">doc</span><span class="p">#src/</span><span class="si">}</span><span class="s2">&quot;</span>
  <span class="nv">link</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">link</span><span class="p">%adoc</span><span class="si">}</span><span class="s2">html&quot;</span>
  <span class="nv">title</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>head -n <span class="m">1</span> <span class="s2">&quot;</span><span class="nv">$doc</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2">&quot;</span>
  <span class="nv">title</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">title</span><span class="p">#= </span><span class="si">}</span><span class="s2">&quot;</span>
  <span class="nb">printf</span> <span class="s2">&quot;\\n== link:%s[%s]\\n%s\\n&quot;</span> <span class="s2">&quot;</span><span class="nv">$link</span><span class="s2">&quot;</span> <span class="s2">&quot;</span><span class="nv">$title</span><span class="s2">&quot;</span> <span class="s2">&quot;</span><span class="k">$(</span><span class="nv">LANG</span><span class="o">=</span>C date <span class="s1">&#39;+%Y-%m-%d&#39;</span> -d @<span class="s2">&quot;</span><span class="nv">$date_</span><span class="s2">&quot;</span><span class="k">)</span><span class="s2">&quot;</span>
  awk <span class="s1">&#39;f{print} /^:description:/{f=1}&#39;</span> <span class="s2">&quot;</span><span class="nv">$doc</span><span class="s2">&quot;</span>
<span class="k">done</span>
</pre></div></div></div>
<div class="paragraph"><p>I shall try using tags.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_a_href_creating_your_own_blogging_engine_html_creating_your_own_blogging_engine_a"><a href="creating_your_own_blogging_engine.html">Creating Your Own Blogging Engine</a></h2>
<div class="sectionbody">
<div class="paragraph"><p>2018-01-06</p></div>
<div class="paragraph"><p>I like to try stuff on my own instead of using the already built ones.
I do this more for an exploration/learning experiment them a "everything already made are bad and we need a new one."</p></div>
<div class="paragraph"><p>I have being interested in blogging for a long time.
I have made some entries on an website for practicing/learning languages called Lang-8 in the intention to see if I would be able to show my intent for other people through my writing.
I think I did manage to do so.</p></div>
<div class="paragraph"><p>So that blogging engine&#8230; This is a work in progress and I am still trying things out.
I want to be able to blog using just a combination of <a href="http://asciidoc.org">Asciidoc</a>, <a href="https://www.gnu.org/software/make">make</a>, <a href="https://www.git-scm.com">git</a>, <a href="https://www.gnu.org/software/coreutils">coreutils</a>, shell script and maybe some <span class="monospaced">awk</span> and/or <span class="monospaced">sed</span> if necessary.
To customize the web page layout I changed the asciidoc <span class="monospaced">html5.conf</span> and pass it as option to the asciidoc parser <span class="monospaced">-f html5.conf</span> with the <span class="monospaced">-e</span> option to disable the implicit load of the system configuration.</p></div>
<div class="paragraph"><p>Before writing specifics details, the structure of the of the project looks like this:</p></div>
<div class="literalblock">
<div class="title">Project structure example</div>
<div class="content monospaced">
<pre>├── asciidoc.conf                             <b>&lt;1&gt;</b>
├── filters
│   └── source
│       └── source-highlight-filter.conf
├── html5.conf                                <b>&lt;1&gt;</b>
├── img
├── javascript                                <b>&lt;2&gt;</b>
│   ├── asciidoc.js
│   ├── asciidoc.ts
│   ├── ASCIIMathML.js
│   ├── LaTeXMathML.js
│   ├── slidy.js
│   └── toc.js
├── lang-en.conf                              <b>&lt;3&gt;</b>
├── lang-pt-BR.conf                           <b>&lt;3&gt;</b>
├── less
│   └── blog.less                             <b>&lt;4&gt;</b>
├── Makefile                                  <b>&lt;5&gt;</b>
├── README
├── src                                       <b>&lt;6&gt;</b>
└── tools                                     <b>&lt;7&gt;</b>
    └── build_archive.sh</pre>
</div></div>
<div class="colist arabic"><ol>
<li>
<p>
Asciidoc configuration with some modifications. "html5.conf" have most of the template for the page that is generated by the asciidoc engine.
</p>
</li>
<li>
<p>
Asciidoc javascript stuff…
</p>
</li>
<li>
<p>
Language defination of the words like "Index", "Abstract" etc.
</p>
</li>
<li>
<p>
The blog css, I am using <span class="monospaced">less</span> to experiment its functionalities.
</p>
</li>
<li>
<p>
Where general automation happens. In case you do not know how <span class="monospaced">make</span>/<span class="monospaced">makefiles</span> work, <a href="https://www.gnu.org/software/make">you might want to have a look in the gnu project page</a>.
</p>
</li>
<li>
<p>
Where the asciidoc files I write will be.
</p>
</li>
<li>
<p>
Tools I create to generate the some pages. They will be explained in the second part of this series.
</p>
</li>
</ol></div>
<div class="paragraph"><p>I use the switch <span class="monospaced">-e</span> so that asciidoc do not pull in system/user configurations and I pass in all the "conf" files needed in the command line. I am using the html5 backend and made some modifications to its layout. Some of those details will be explained in the next post. For now, bellow goes the <span class="monospaced">Makefile</span> that made for this project.</p></div>
<div class="listingblock">
<div class="content"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">prefix</span> <span class="o">?=</span> /srv/noobkotto
<span class="nv">DESTDIR</span> <span class="o">?=</span> /#root dir
<span class="nv">BUILD_DIR</span><span class="o">=</span>html
<span class="nv">STATIC_DIR</span><span class="o">=</span><span class="si">${</span><span class="nv">BUILD_DIR</span><span class="si">}</span>/static
<span class="nv">BLOG</span><span class="o">=</span>blog

<span class="nv">JS</span><span class="o">=</span><span class="k">$(</span>STATIC_DIR<span class="k">)</span>/javascript/asciidoc.js
<span class="nv">CSS</span><span class="o">=</span><span class="k">$(</span>STATIC_DIR<span class="k">)</span>/css/blog.css <span class="k">$(</span>STATIC_DIR<span class="k">)</span>/css/pygments.css
<span class="nv">IMAGES</span><span class="o">=</span><span class="k">$(</span>STATIC_DIR<span class="k">)</span>/img/carro_projeto_robotica_2008.jpg <span class="se">\</span>
                         <span class="k">$(</span>STATIC_DIR<span class="k">)</span>/img/elias_portrait_20171206_14_44_18.jpg
<span class="nv">ASCIIDOC_CONFIG</span><span class="o">=</span>-f asciidoc.conf -f html5.conf <span class="se">\</span>
                                                                -f filters/source/source-highlight-filter.conf -f lang-en.conf

<span class="nv">POSTS</span> <span class="o">=</span> <span class="k">$(</span>shell ./tools/adoc_files.sh <span class="k">$(</span>BUILD_DIR<span class="k">))</span>

<span class="nf">all</span><span class="o">:</span> <span class="n">build_dir</span> <span class="k">$(</span><span class="nv">CSS</span><span class="k">)</span> <span class="k">$(</span><span class="nv">JS</span><span class="k">)</span> <span class="k">$(</span><span class="nv">IMAGES</span><span class="k">)</span> <span class="n">src</span>/<span class="n">index</span>.<span class="n">adoc</span> <span class="n">src</span>/<span class="n">archive</span>.<span class="n">adoc</span> <span class="k">$(</span><span class="nv">POSTS</span><span class="k">)</span> \
        <span class="k">$(</span><span class="nv">BUILD_DIR</span><span class="k">)</span>/<span class="n">archive</span>.<span class="n">html</span> <span class="k">$(</span><span class="nv">BUILD_DIR</span><span class="k">)</span>/<span class="n">index</span>.<span class="n">html</span>

<span class="nf">build_dir</span><span class="o">:</span>
        @mkdir -p <span class="k">$(</span>STATIC_DIR<span class="k">)</span>/css
        @mkdir -p <span class="k">$(</span>STATIC_DIR<span class="k">)</span>/javascript
        @mkdir -p <span class="k">$(</span>STATIC_DIR<span class="k">)</span>/img

<span class="nf">src/archive.adoc</span><span class="o">:</span>
        ./tools/build_archive.sh &gt; src/archive.adoc

<span class="nf">src/index.adoc</span><span class="o">:</span>
        ./tools/build_index.sh &gt; src/index.adoc

<span class="nf">$(BUILD_DIR)/%.html</span><span class="o">:</span> <span class="n">src</span>/%.<span class="n">adoc</span>
        asciidoc -o - &gt; <span class="nv">$@</span> -e <span class="k">$(</span>ASCIIDOC_CONFIG<span class="k">)</span> -a <span class="nv">website</span><span class="o">=</span>http://www.noobkoto.com/ $^

<span class="nf">${STATIC_DIR}/css/%.css</span><span class="o">:</span> <span class="n">less</span>/%.<span class="n">less</span>
        lessc $^ <span class="nv">$@</span>

<span class="nf">$(STATIC_DIR)/javascript/%.js</span><span class="o">:</span> <span class="n">javascript</span>/%.<span class="n">ts</span>
        tsc --outFile <span class="nv">$@</span> $^

<span class="nf">$(STATIC_DIR)/img/%.jpg</span><span class="o">:</span> <span class="n">img</span>/%.<span class="n">jpg</span>
        cp $^ <span class="nv">$@</span>

<span class="nf">$(STATIC_DIR)/img/%.png</span><span class="o">:</span> <span class="n">img</span>/%.<span class="n">png</span>
        cp $^ <span class="nv">$@</span>

<span class="nf">install</span><span class="o">:</span> <span class="n">all</span>
        install -d <span class="k">$(</span>DESTDIR<span class="k">)$(</span>prefix<span class="k">)</span>/<span class="k">$(</span>BLOG<span class="k">)</span>
        install -d <span class="k">$(</span>DESTDIR<span class="k">)$(</span>prefix<span class="k">)</span>/<span class="k">$(</span>BLOG<span class="k">)</span>/static
        install -d <span class="k">$(</span>DESTDIR<span class="k">)$(</span>prefix<span class="k">)</span>/<span class="k">$(</span>BLOG<span class="k">)</span>/static/css
        install -d <span class="k">$(</span>DESTDIR<span class="k">)$(</span>prefix<span class="k">)</span>/<span class="k">$(</span>BLOG<span class="k">)</span>/static/javascript
        install -d <span class="k">$(</span>DESTDIR<span class="k">)$(</span>prefix<span class="k">)</span>/<span class="k">$(</span>BLOG<span class="k">)</span>/static/img
        install -m <span class="m">0644</span> <span class="k">$(</span>BUILD_DIR<span class="k">)</span>/*.html <span class="k">$(</span>DESTDIR<span class="k">)$(</span>prefix<span class="k">)</span>/<span class="k">$(</span>BLOG<span class="k">)</span>/
        install -m <span class="m">0644</span> <span class="k">$(</span>STATIC_DIR<span class="k">)</span>/css/*.css <span class="k">$(</span>DESTDIR<span class="k">)$(</span>prefix<span class="k">)</span>/<span class="k">$(</span>BLOG<span class="k">)</span>/static/css
        install -m <span class="m">0644</span> <span class="k">$(</span>STATIC_DIR<span class="k">)</span>/javascript/*.js <span class="k">$(</span>DESTDIR<span class="k">)$(</span>prefix<span class="k">)</span>/<span class="k">$(</span>BLOG<span class="k">)</span>/static/javascript
        install -m <span class="m">0644</span> <span class="k">$(</span>STATIC_DIR<span class="k">)</span>/img/* <span class="k">$(</span>DESTDIR<span class="k">)$(</span>prefix<span class="k">)</span>/<span class="k">$(</span>BLOG<span class="k">)</span>/static/img

<span class="nf">clean</span><span class="o">:</span>
        -rm -r <span class="k">$(</span>BUILD_DIR<span class="k">)</span>
        -rm src/archive.adoc src/index.adoc

<span class="nf">.PHONY</span><span class="o">:</span> <span class="n">all</span> <span class="n">build_dir</span>
</pre></div>
</td></tr></table></div></div>
</div>
</div>
</div>
<div id="footnotes"><hr></div>
<div id="footer">
<div id="footer-text">
Last updated
 2022-03-20 19:25:16 WET
</div>
</div>
</body>
</html>
