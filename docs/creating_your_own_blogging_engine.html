<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="AsciiDoc 10.1.4">
<meta name="description" content="My thoughts/log on creating your own blogging engine">
<meta name="keywords" content="blog, blogging, engine, noobkotto">
<meta name="viewport" content="width=device-width, initial-scale=1 maximum=scale=1">
<title>Elias Moura's blog - Creating Your Own Blogging Engine</title>
<link rel="stylesheet" href="static/css/blog.css" type="text/css">
<link rel="stylesheet" href="static/css/pygments.css" type="text/css">

<script type="text/javascript" src="static/javascript/asciidoc.js"></script>
<script type="text/javascript">
asciidoc.install();
</script>
</head>
<body>
<div id="banner"></div>
<nav id="navbar">
<span id="home"><a href="/blog">Elias Moura</a></span>
<span id="categories"><a href="categories.html">Categories</a></span>
<span id="archive"><a href="archive.html">Archive</a></span>
<span id="about"><a href="about.html">About</a></span>
</nav>
<div id="header">
<h1>Creating Your Own Blogging Engine</h1>
<span id="author">Elias Alves Moura</span> -
<span id="email" class="monospaced">&lt;<a href="mailto:eliasmoura.alves@gmail.com">eliasmoura.alves@gmail.com</a>&gt;</span><br>
<span id="revnumber">version 1.0,</span>
<span id="revdate">2018-01-06</span>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>I like to try stuff on my own instead of using the already built ones.
I do this more for an exploration/learning experiment them a "everything already made are bad and we need a new one."</p></div>
<div class="paragraph"><p>I have being interested in blogging for a long time.
I have made some entries on an website for practicing/learning languages called Lang-8 in the intention to see if I would be able to show my intent for other people through my writing.
I think I did manage to do so.</p></div>
<div class="paragraph"><p>So that blogging engine&#8230; This is a work in progress and I am still trying things out.
I want to be able to blog using just a combination of <a href="http://asciidoc.org">Asciidoc</a>, <a href="https://www.gnu.org/software/make">make</a>, <a href="https://www.git-scm.com">git</a>, <a href="https://www.gnu.org/software/coreutils">coreutils</a>, shell script and maybe some <span class="monospaced">awk</span> and/or <span class="monospaced">sed</span> if necessary.
To customize the web page layout I changed the asciidoc <span class="monospaced">html5.conf</span> and pass it as option to the asciidoc parser <span class="monospaced">-f html5.conf</span> with the <span class="monospaced">-e</span> option to disable the implicit load of the system configuration.</p></div>
<div class="paragraph"><p>Before writing specifics details, the structure of the of the project looks like this:</p></div>
<div class="literalblock">
<div class="title">Project structure example</div>
<div class="content monospaced">
<pre>├── asciidoc.conf                             <b>&lt;1&gt;</b>
├── filters
│   └── source
│       └── source-highlight-filter.conf
├── html5.conf                                <b>&lt;1&gt;</b>
├── img
├── javascript                                <b>&lt;2&gt;</b>
│   ├── asciidoc.js
│   ├── asciidoc.ts
│   ├── ASCIIMathML.js
│   ├── LaTeXMathML.js
│   ├── slidy.js
│   └── toc.js
├── lang-en.conf                              <b>&lt;3&gt;</b>
├── lang-pt-BR.conf                           <b>&lt;3&gt;</b>
├── less
│   └── blog.less                             <b>&lt;4&gt;</b>
├── Makefile                                  <b>&lt;5&gt;</b>
├── README
├── src                                       <b>&lt;6&gt;</b>
└── tools                                     <b>&lt;7&gt;</b>
    └── build_archive.sh</pre>
</div></div>
<div class="colist arabic"><ol>
<li>
<p>
Asciidoc configuration with some modifications. "html5.conf" have most of the template for the page that is generated by the asciidoc engine.
</p>
</li>
<li>
<p>
Asciidoc javascript stuff…
</p>
</li>
<li>
<p>
Language defination of the words like "Index", "Abstract" etc.
</p>
</li>
<li>
<p>
The blog css, I am using <span class="monospaced">less</span> to experiment its functionalities.
</p>
</li>
<li>
<p>
Where general automation happens. In case you do not know how <span class="monospaced">make</span>/<span class="monospaced">makefiles</span> work, <a href="https://www.gnu.org/software/make">you might want to have a look in the gnu project page</a>.
</p>
</li>
<li>
<p>
Where the asciidoc files I write will be.
</p>
</li>
<li>
<p>
Tools I create to generate the some pages. They will be explained in the second part of this series.
</p>
</li>
</ol></div>
<div class="paragraph"><p>I use the switch <span class="monospaced">-e</span> so that asciidoc do not pull in system/user configurations and I pass in all the "conf" files needed in the command line. I am using the html5 backend and made some modifications to its layout. Some of those details will be explained in the next post. For now, bellow goes the <span class="monospaced">Makefile</span> that made for this project.</p></div>
<div class="listingblock">
<div class="content"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nv">prefix</span> <span class="o">?=</span> /srv/noobkotto
<span class="nv">DESTDIR</span> <span class="o">?=</span> /#root dir
<span class="nv">BUILD_DIR</span><span class="o">=</span>html
<span class="nv">STATIC_DIR</span><span class="o">=</span><span class="si">${</span><span class="nv">BUILD_DIR</span><span class="si">}</span>/static
<span class="nv">BLOG</span><span class="o">=</span>blog

<span class="nv">JS</span><span class="o">=</span><span class="k">$(</span>STATIC_DIR<span class="k">)</span>/javascript/asciidoc.js
<span class="nv">CSS</span><span class="o">=</span><span class="k">$(</span>STATIC_DIR<span class="k">)</span>/css/blog.css <span class="k">$(</span>STATIC_DIR<span class="k">)</span>/css/pygments.css
<span class="nv">IMAGES</span><span class="o">=</span><span class="k">$(</span>STATIC_DIR<span class="k">)</span>/img/carro_projeto_robotica_2008.jpg <span class="se">\</span>
                         <span class="k">$(</span>STATIC_DIR<span class="k">)</span>/img/elias_portrait_20171206_14_44_18.jpg
<span class="nv">ASCIIDOC_CONFIG</span><span class="o">=</span>-f asciidoc.conf -f html5.conf <span class="se">\</span>
                                                                -f filters/source/source-highlight-filter.conf -f lang-en.conf

<span class="nv">POSTS</span> <span class="o">=</span> <span class="k">$(</span>shell ./tools/adoc_files.sh <span class="k">$(</span>BUILD_DIR<span class="k">))</span>

<span class="nf">all</span><span class="o">:</span> <span class="n">build_dir</span> <span class="k">$(</span><span class="nv">CSS</span><span class="k">)</span> <span class="k">$(</span><span class="nv">JS</span><span class="k">)</span> <span class="k">$(</span><span class="nv">IMAGES</span><span class="k">)</span> <span class="n">src</span>/<span class="n">index</span>.<span class="n">adoc</span> <span class="n">src</span>/<span class="n">archive</span>.<span class="n">adoc</span> <span class="k">$(</span><span class="nv">POSTS</span><span class="k">)</span> \
        <span class="k">$(</span><span class="nv">BUILD_DIR</span><span class="k">)</span>/<span class="n">archive</span>.<span class="n">html</span> <span class="k">$(</span><span class="nv">BUILD_DIR</span><span class="k">)</span>/<span class="n">index</span>.<span class="n">html</span>

<span class="nf">build_dir</span><span class="o">:</span>
        @mkdir -p <span class="k">$(</span>STATIC_DIR<span class="k">)</span>/css
        @mkdir -p <span class="k">$(</span>STATIC_DIR<span class="k">)</span>/javascript
        @mkdir -p <span class="k">$(</span>STATIC_DIR<span class="k">)</span>/img

<span class="nf">src/archive.adoc</span><span class="o">:</span>
        ./tools/build_archive.sh &gt; src/archive.adoc

<span class="nf">src/index.adoc</span><span class="o">:</span>
        ./tools/build_index.sh &gt; src/index.adoc

<span class="nf">$(BUILD_DIR)/%.html</span><span class="o">:</span> <span class="n">src</span>/%.<span class="n">adoc</span>
        asciidoc -o - &gt; <span class="nv">$@</span> -e <span class="k">$(</span>ASCIIDOC_CONFIG<span class="k">)</span> -a <span class="nv">website</span><span class="o">=</span>http://www.noobkoto.com/ $^

<span class="nf">${STATIC_DIR}/css/%.css</span><span class="o">:</span> <span class="n">less</span>/%.<span class="n">less</span>
        lessc $^ <span class="nv">$@</span>

<span class="nf">$(STATIC_DIR)/javascript/%.js</span><span class="o">:</span> <span class="n">javascript</span>/%.<span class="n">ts</span>
        tsc --outFile <span class="nv">$@</span> $^

<span class="nf">$(STATIC_DIR)/img/%.jpg</span><span class="o">:</span> <span class="n">img</span>/%.<span class="n">jpg</span>
        cp $^ <span class="nv">$@</span>

<span class="nf">$(STATIC_DIR)/img/%.png</span><span class="o">:</span> <span class="n">img</span>/%.<span class="n">png</span>
        cp $^ <span class="nv">$@</span>

<span class="nf">install</span><span class="o">:</span> <span class="n">all</span>
        install -d <span class="k">$(</span>DESTDIR<span class="k">)$(</span>prefix<span class="k">)</span>/<span class="k">$(</span>BLOG<span class="k">)</span>
        install -d <span class="k">$(</span>DESTDIR<span class="k">)$(</span>prefix<span class="k">)</span>/<span class="k">$(</span>BLOG<span class="k">)</span>/static
        install -d <span class="k">$(</span>DESTDIR<span class="k">)$(</span>prefix<span class="k">)</span>/<span class="k">$(</span>BLOG<span class="k">)</span>/static/css
        install -d <span class="k">$(</span>DESTDIR<span class="k">)$(</span>prefix<span class="k">)</span>/<span class="k">$(</span>BLOG<span class="k">)</span>/static/javascript
        install -d <span class="k">$(</span>DESTDIR<span class="k">)$(</span>prefix<span class="k">)</span>/<span class="k">$(</span>BLOG<span class="k">)</span>/static/img
        install -m <span class="m">0644</span> <span class="k">$(</span>BUILD_DIR<span class="k">)</span>/*.html <span class="k">$(</span>DESTDIR<span class="k">)$(</span>prefix<span class="k">)</span>/<span class="k">$(</span>BLOG<span class="k">)</span>/
        install -m <span class="m">0644</span> <span class="k">$(</span>STATIC_DIR<span class="k">)</span>/css/*.css <span class="k">$(</span>DESTDIR<span class="k">)$(</span>prefix<span class="k">)</span>/<span class="k">$(</span>BLOG<span class="k">)</span>/static/css
        install -m <span class="m">0644</span> <span class="k">$(</span>STATIC_DIR<span class="k">)</span>/javascript/*.js <span class="k">$(</span>DESTDIR<span class="k">)$(</span>prefix<span class="k">)</span>/<span class="k">$(</span>BLOG<span class="k">)</span>/static/javascript
        install -m <span class="m">0644</span> <span class="k">$(</span>STATIC_DIR<span class="k">)</span>/img/* <span class="k">$(</span>DESTDIR<span class="k">)$(</span>prefix<span class="k">)</span>/<span class="k">$(</span>BLOG<span class="k">)</span>/static/img

<span class="nf">clean</span><span class="o">:</span>
        -rm -r <span class="k">$(</span>BUILD_DIR<span class="k">)</span>
        -rm src/archive.adoc src/index.adoc

<span class="nf">.PHONY</span><span class="o">:</span> <span class="n">all</span> <span class="n">build_dir</span>
</pre></div>
</td></tr></table></div></div>
</div>
</div>
</div>
<div id="footnotes"><hr></div>
<div id="footer">
<div id="footer-text">
Version 1.0<br>
Last updated
 2022-03-20 17:51:37 WET
</div>
</div>
</body>
</html>
